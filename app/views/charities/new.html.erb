<h2>Create your charity</h2>

<p>Fill in this simple step-by-step form to make your request for a charity site. Once you're finished a request is sent to our system administrator who will then review your request. If your charity is approved your website will be automatically generated. You'll then be emailed your login credentials so you can begin sculpting your very own website for your charity.</p>

<div class="progress">
  <div class="progress-bar" id="pb" style="width: 0%;"></div>
  <div class="progress-bar progress-bar-info" style="width: 1%;"></div>  
</div>
<%= form_for :charity, url: charities_path do |f| %>
  <div class="tabbable">
    <ul class="nav nav-tabs" id="step-selection">
      <% if !session[ :auth ] %>
      <li class="active">
        <a href="#form-step-1" data-toggle="tab">Account</a>
      </li>
      <% end %>
      <li>
        <a href="#form-step-2" data-toggle="tab">Charity</a>
      </li>
      <li>
        <a href="#form-step-3" data-toggle="tab">Verification</a>
      </li>
      <li>
        <a href="#form-step-4" data-toggle="tab">Template</a>
      </li>  
      <li>
        <a href="#form-step-5" data-toggle="tab">Finish</a>
      </li>        
    </ul>

    <div class="tab-content">

      <% if !session[ :auth ] %>
        <div class="tab-pane fade in active" id="form-step-1">

          <%= fields_for :user do |uf| %>
            <%= field_set_tag do %>
              <h4>Your account information.</h4>
              <div class="row">
                <div class="col-md-4">
                  <%= uf.label :f_name, "What's your first name?" %>
                  <%= uf.text_field :f_name, class: "form-control", placeholder: "First name" %>
                </div>
                <div class="col-md-4">
                  <%= uf.label :l_name, "What's your last name?" %>
                  <%= uf.text_field :l_name, class: "form-control", placeholder: "Last name" %>
                </div>
              </div>

              <div class="row">
                <div class="col-md-4">
                  <%= uf.label :email, "What's your email address?" %>
                  <%= uf.text_field :email, class: "form-control", placeholder: "Email" %>
                </div>
                <div class="col-md-4">
                  <%= uf.label :email_confirmation, "Re-type your email address" %>
                  <%= uf.text_field :email_confirmation, class: "form-control", placeholder: "Repeat your email" %>
                </div>
              </div>

              <div class="row">
                <div class="col-md-4">
                  <%= uf.label :password, "Enter a password" %>
                  <%= uf.text_field :password, type: "password", class: "form-control", placeholder: "Password" %>
                </div>
                <div class="col-md-4">
                  <%= uf.label :password_confirmation, "Re-type your password" %>
                  <%= uf.text_field :password_confirmation, type: "password", class: "form-control", placeholder: "Repeat your password" %>
                </div>
              </div>
            <% end %>
          <% end %>

        </div>
      <% end %>

      <div class="tab-pane fade" id="form-step-2">

        <%= field_set_tag do %>
          <h4>Charity domain</h4>

          <%= f.label :domain, "Enter a meaningful namespace for our system (eg. Cork Cat Action Trust = catactiontrust )" %>
          <%= f.text_field :domain, class: "form-control", placeholder: "Enter your domain", value: params[ :domain ]? params[ :domain ] : "" %>
        <% end %>
         <%= field_set_tag do %>
          <h4>Organisation details.</h4>

          <%= f.label :org_name, "What's your organisation?" %>
          <%= f.text_field :org_name, class: "form-control", placeholder: "Name of organisation" %>

          <%= f.label :email, "And its email address." %>
          <%= f.text_field :email, class: "form-control", type: "email", placeholder: "Email of organisation" %>
        <% end %>

      </div>

      <div class="tab-pane fade" id="form-step-3">
        <h4>Charity Number Verification</h4>
        <p>In order for your site to be approved, we'll need to check if your charity number is an <em>Authorised Resident Charity</em>, meaning the organisation must be <strong>recognised</strong> by the government as valid. Learn more about authorised charities <%= link_to "here.", "http://www.revenue.ie/en/business/authorised-charities-resident.html" %></p>

        <p>All you have to do is enter it in the text box below and we'll verify the rest.</p>

        <div class="form-group" id="verify-group">
          <%= f.label :charity_number, "Charity Number" %><br/ >
          <%= f.text_field :charity_number, id: "num-verify-inp", class: "form-control", placeholder: "Enter the charity number here." %>
          <%= f.text_field :charity_number_verified, id: "num-verified-inp", type: "hidden", value: "false" %>

          <button type="button" class="btn btn-info" id="num-verify-btn">Check</button>
          <div id="verify-status">
            <div class="progress progress-striped active">
              <div class="progress-bar"  role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                <span class="sr-only">Verifying...</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="tab-pane fade" id="form-step-4">
        <%= field_set_tag do %>
          <h4>Choose a template.</h4>
          <p>What template you choose will have a site-wide effect on how your website looks to your visitors. There are many templates to choose from below. Click the preview button to get a full screen demonstration.</p>

          <label class="radio">
            <input type="radio" name="charity[template]" value="1" data-toggle="radio" checked />
              Template 1.
          </label>

          <label class="radio">
            <input type="radio" name="charity[template]" value="2" data-toggle="radio" />
              Template 2.
          </label>
        <% end %>
      </div>

      <div class="tab-pane fade" id="form-step-5">
        <h4>Finishing up</h4>
        <p>Please check what you've entered before submitting the form. Once you submit, the request will be sent to the system admin.<br />
        <strong>Multiple duplicate requests cause delays for not only you but also for others.</strong></p>

        <input type="reset" name="clear" value="Clear" class="btn btn-default" />
        <input type="submit" name="submit" value="Save" class="btn btn-primary btn-wide" />
      </div>
    </div>
  </div>
<button type="button" class="btn tab-nav-btn" id="prev-btn"><span class="glyphicon glyphicon-chevron-left"></span></button>
<button type="button" class="btn tab-nav-btn" id="next-btn"><span class="glyphicon glyphicon-chevron-right"></span></button>
<% end %>

<%= javascript_include_tag "charity_form" %>